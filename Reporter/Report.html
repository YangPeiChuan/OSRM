<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple markers</title>
    <style>
        #map {
            height: 100%;
        }

        html,
        body {
            height: 100%;
            margin: 0;
            padding: 0;
        }
    </style>
</head>

<body>
    <div id="map"></div>
    <script>
        function status(response) {
            if (response.url === '/login') {
                return window.location.href = response.url;
            }

            if (response.status >= 200 && response.status < 300) {
                return Promise.resolve(response)
            } else {
                return Promise.reject(new Error(response.statusText))
            }
        }
        function json(response) {
            return response.json()
        }
        function initMap() {

            var legality = [
                [{ lng: 121.524820469025, lat: 25.0846771986692 },
                { lng: 121.525182904988, lat: 25.0860339878216 },
                { lng: 121.525345941979, lat: 25.0862981053615 },
                { lng: 121.525798180499, lat: 25.0871532352821 },
                { lng: 121.526236358786, lat: 25.0880803297785 },
                { lng: 121.526612828479, lat: 25.0888541232125 },
                { lng: 121.527094149876, lat: 25.0898835083742 },
                { lng: 121.527094838176, lat: 25.0900974804164 },
                { lng: 121.527042107569, lat: 25.0902529519947 },
                { lng: 121.525828817377, lat: 25.0905548088566 },
                { lng: 121.525734945756, lat: 25.0906634124272 },
                { lng: 121.525608490856, lat: 25.0906181276892 },
                { lng: 121.525602414483, lat: 25.0905202869875 },
                { lng: 121.525691443026, lat: 25.0904683854642 },
                { lng: 121.525792559557, lat: 25.0905185962344 },
                { lng: 121.525751836846, lat: 25.0906520632496 },
                { lng: 121.525760075581, lat: 25.0907805151232 },
                { lng: 121.525547412815, lat: 25.0915645422789 },
                { lng: 121.525372141806, lat: 25.0922056543227 },
                { lng: 121.525968701057, lat: 25.0923646620451 },
                { lng: 121.526328014981, lat: 25.0924682462334 },
                { lng: 121.525784299764, lat: 25.0940386490818 },
                { lng: 121.525804796019, lat: 25.0942732520517 },
                { lng: 121.525506815926, lat: 25.095214960987 },
                { lng: 121.52795361734, lat: 25.0957433478268 },
                { lng: 121.53032689686, lat: 25.096191228058 },
                { lng: 121.53209929842, lat: 25.0964997755355 },
                { lng: 121.532503052942, lat: 25.0966542429687 },
                { lng: 121.535564022904, lat: 25.0986627396864 },
                { lng: 121.536265408647, lat: 25.0990758381343 },
                { lng: 121.536527112851, lat: 25.0993085055035 },
                { lng: 121.537208466949, lat: 25.1002912219856 },
                { lng: 121.537706178172, lat: 25.1009429690561 },
                { lng: 121.537769492428, lat: 25.101043049722 },
                { lng: 121.537780156888, lat: 25.1012244890763 },
                { lng: 121.537630763694, lat: 25.1020565531762 },
                { lng: 121.537324861788, lat: 25.1025770261009 },
                { lng: 121.537186761303, lat: 25.1028828186013 },
                { lng: 121.536816188501, lat: 25.104019849793 },
                { lng: 121.536761835448, lat: 25.1042536875882 },
                { lng: 121.536703302673, lat: 25.1048515206746 },
                { lng: 121.536620635531, lat: 25.1050383295124 },
                { lng: 121.535965873583, lat: 25.1061300997546 },
                { lng: 121.535761840527, lat: 25.1063723103117 },
                { lng: 121.535272422342, lat: 25.1067864299032 },
                { lng: 121.53467838285, lat: 25.1072900185044 },
                { lng: 121.53453990754, lat: 25.1074652522306 },
                { lng: 121.534486816769, lat: 25.1076736227217 },
                { lng: 121.534513570672, lat: 25.1078637125741 },
                { lng: 121.534670700657, lat: 25.1080533061268 },
                { lng: 121.535774427988, lat: 25.1085405550898 },
                { lng: 121.535939219028, lat: 25.1085986289872 },
                { lng: 121.536160169499, lat: 25.1085795255211 },
                { lng: 121.536355872731, lat: 25.1085098646058 },
                { lng: 121.536519894467, lat: 25.1083395882839 },
                { lng: 121.536927398799, lat: 25.1078192625718 },
                { lng: 121.537053762186, lat: 25.107558245621 },
                { lng: 121.536906100076, lat: 25.1065104679144 },
                { lng: 121.53697658735, lat: 25.1062552114425 },
                { lng: 121.537361496521, lat: 25.1058097414037 },
                { lng: 121.537646460687, lat: 25.1053031491743 },
                { lng: 121.537773721525, lat: 25.1049634145738 },
                { lng: 121.537928528669, lat: 25.104660282973 },
                { lng: 121.538159781358, lat: 25.1043005694224 },
                { lng: 121.538453117618, lat: 25.1036989841885 },
                { lng: 121.539024688119, lat: 25.1029568730825 },
                { lng: 121.539440839517, lat: 25.1020725104498 },
                { lng: 121.539711160756, lat: 25.1019025526763 },
                { lng: 121.539944598651, lat: 25.1019138853301 },
                { lng: 121.54034956065, lat: 25.1021173111491 },
                { lng: 121.54128791102, lat: 25.1026429788753 },
                { lng: 121.541451357345, lat: 25.1027870774154 },
                { lng: 121.541559996209, lat: 25.1029702212373 },
                { lng: 121.541694914273, lat: 25.1032926480364 },
                { lng: 121.541820059366, lat: 25.1034428835084 },
                { lng: 121.542607946186, lat: 25.1040091833337 },
                { lng: 121.543355937214, lat: 25.1047310300905 },
                { lng: 121.544282993529, lat: 25.1053587777613 },
                { lng: 121.544700627165, lat: 25.1056971715197 },
                { lng: 121.545108257425, lat: 25.1063152659655 },
                { lng: 121.545381603236, lat: 25.1070789660807 },
                { lng: 121.545625553132, lat: 25.1076537082924 },
                { lng: 121.545758716392, lat: 25.1078243959858 },
                { lng: 121.546243429882, lat: 25.1083717950866 },
                { lng: 121.546569984448, lat: 25.1087956332347 },
                { lng: 121.547240084378, lat: 25.1095152367583 },
                { lng: 121.547463355352, lat: 25.1096879662789 },
                { lng: 121.548262451168, lat: 25.110225641273 },
                { lng: 121.548823050955, lat: 25.1106702583748 },
                { lng: 121.549131161917, lat: 25.1109430059956 },
                { lng: 121.549336761124, lat: 25.1111557230139 },
                { lng: 121.549547095453, lat: 25.1115417976211 },
                { lng: 121.549860908395, lat: 25.1124314697947 },
                { lng: 121.550191771746, lat: 25.1134878990176 },
                { lng: 121.550474661765, lat: 25.1142177162676 },
                { lng: 121.550947742474, lat: 25.1152458288565 },
                { lng: 121.550995453172, lat: 25.1154509771402 },
                { lng: 121.550953981345, lat: 25.115930382534 },
                { lng: 121.550950408273, lat: 25.116350841284 },
                { lng: 121.551068834576, lat: 25.1165607058565 }]
            ];

            var illegality = [
                [{ lng: 121.524820469025, lat: 25.0846771986692 },
                { lng: 121.525182904988, lat: 25.0860339878216 },
                { lng: 121.525345941979, lat: 25.0862981053615 },
                { lng: 121.525798180499, lat: 25.0871532352821 },
                { lng: 121.526236358786, lat: 25.0880803297785 },
                { lng: 121.526612828479, lat: 25.0888541232125 },
                { lng: 121.527094149876, lat: 25.0898835083742 },
                { lng: 121.527094838176, lat: 25.0900974804164 },
                { lng: 121.527042107569, lat: 25.0902529519947 },
                { lng: 121.525828817377, lat: 25.0905548088566 },
                { lng: 121.525734945756, lat: 25.0906634124272 },
                { lng: 121.525608490856, lat: 25.0906181276892 },
                { lng: 121.525602414483, lat: 25.0905202869875 },
                { lng: 121.525691443026, lat: 25.0904683854642 },
                { lng: 121.525792559557, lat: 25.0905185962344 },
                { lng: 121.525751836846, lat: 25.0906520632496 },
                { lng: 121.525760075581, lat: 25.0907805151232 },
                { lng: 121.525547412815, lat: 25.0915645422789 },
                { lng: 121.525372141806, lat: 25.0922056543227 },
                { lng: 121.525968701057, lat: 25.0923646620451 },
                { lng: 121.526328014981, lat: 25.0924682462334 },
                { lng: 121.525784299764, lat: 25.0940386490818 },
                { lng: 121.525804796019, lat: 25.0942732520517 },
                { lng: 121.525506815926, lat: 25.095214960987 },
                { lng: 121.52795361734, lat: 25.0957433478268 },
                { lng: 121.53032689686, lat: 25.096191228058 },
                { lng: 121.53209929842, lat: 25.0964997755355 },
                { lng: 121.532503052942, lat: 25.0966542429687 },
                { lng: 121.535564022904, lat: 25.0986627396864 },
                { lng: 121.536265408647, lat: 25.0990758381343 },
                { lng: 121.536527112851, lat: 25.0993085055035 },
                { lng: 121.537208466949, lat: 25.1002912219856 },
                { lng: 121.537706178172, lat: 25.1009429690561 },
                { lng: 121.537769492428, lat: 25.101043049722 },
                { lng: 121.537780156888, lat: 25.1012244890763 },
                { lng: 121.537630763694, lat: 25.1020565531762 },
                { lng: 121.537324861788, lat: 25.1025770261009 },
                { lng: 121.537186761303, lat: 25.1028828186013 },
                { lng: 121.536816188501, lat: 25.104019849793 },
                { lng: 121.536761835448, lat: 25.1042536875882 },
                { lng: 121.536703302673, lat: 25.1048515206746 },
                { lng: 121.536620635531, lat: 25.1050383295124 },
                { lng: 121.535965873583, lat: 25.1061300997546 },
                { lng: 121.535761840527, lat: 25.1063723103117 },
                { lng: 121.535272422342, lat: 25.1067864299032 },
                { lng: 121.53467838285, lat: 25.1072900185044 },
                { lng: 121.53453990754, lat: 25.1074652522306 },
                { lng: 121.534486816769, lat: 25.1076736227217 },
                { lng: 121.534513570672, lat: 25.1078637125741 },
                { lng: 121.534670700657, lat: 25.1080533061268 },
                { lng: 121.535774427988, lat: 25.1085405550898 },
                { lng: 121.535939219028, lat: 25.1085986289872 },
                { lng: 121.536160169499, lat: 25.1085795255211 },
                { lng: 121.536355872731, lat: 25.1085098646058 },
                { lng: 121.536519894467, lat: 25.1083395882839 },
                { lng: 121.536927398799, lat: 25.1078192625718 },
                { lng: 121.537053762186, lat: 25.107558245621 },
                { lng: 121.536906100076, lat: 25.1065104679144 },
                { lng: 121.53697658735, lat: 25.1062552114425 },
                { lng: 121.537361496521, lat: 25.1058097414037 },
                { lng: 121.537646460687, lat: 25.1053031491743 },
                { lng: 121.537773721525, lat: 25.1049634145738 },
                { lng: 121.537928528669, lat: 25.104660282973 },
                { lng: 121.538159781358, lat: 25.1043005694224 },
                { lng: 121.538453117618, lat: 25.1036989841885 },
                { lng: 121.539024688119, lat: 25.1029568730825 },
                { lng: 121.539440839517, lat: 25.1020725104498 },
                { lng: 121.539711160756, lat: 25.1019025526763 },
                { lng: 121.539944598651, lat: 25.1019138853301 },
                { lng: 121.54034956065, lat: 25.1021173111491 },
                { lng: 121.54128791102, lat: 25.1026429788753 },
                { lng: 121.541451357345, lat: 25.1027870774154 },
                { lng: 121.541559996209, lat: 25.1029702212373 },
                { lng: 121.541694914273, lat: 25.1032926480364 },
                { lng: 121.541820059366, lat: 25.1034428835084 },
                { lng: 121.542607946186, lat: 25.1040091833337 },
                { lng: 121.543355937214, lat: 25.1047310300905 },
                { lng: 121.544282993529, lat: 25.1053587777613 },
                { lng: 121.544700627165, lat: 25.1056971715197 },
                { lng: 121.545108257425, lat: 25.1063152659655 },
                { lng: 121.545381603236, lat: 25.1070789660807 },
                { lng: 121.545625553132, lat: 25.1076537082924 },
                { lng: 121.545758716392, lat: 25.1078243959858 },
                { lng: 121.546243429882, lat: 25.1083717950866 },
                { lng: 121.546569984448, lat: 25.1087956332347 },
                { lng: 121.547240084378, lat: 25.1095152367583 },
                { lng: 121.547463355352, lat: 25.1096879662789 },
                { lng: 121.548262451168, lat: 25.110225641273 },
                { lng: 121.548823050955, lat: 25.1106702583748 },
                { lng: 121.549131161917, lat: 25.1109430059956 },
                { lng: 121.549336761124, lat: 25.1111557230139 },
                { lng: 121.549547095453, lat: 25.1115417976211 },
                { lng: 121.549860908395, lat: 25.1124314697947 },
                { lng: 121.550191771746, lat: 25.1134878990176 },
                { lng: 121.550474661765, lat: 25.1142177162676 },
                { lng: 121.550947742474, lat: 25.1152458288565 },
                { lng: 121.550995453172, lat: 25.1154509771402 },
                { lng: 121.550953981345, lat: 25.115930382534 },
                { lng: 121.550950408273, lat: 25.116350841284 },
                { lng: 121.551068834576, lat: 25.1165607058565 }]
            ];

            function getMax(Array, LatLng) {
                return Math.max.apply(Math, Array.map(function (o) {
                    return Math.max.apply(Math, o.map(function (p) { return p[LatLng]; }));
                }));
            }

            function getMin(Array, LatLng) {
                return Math.min.apply(Math, Array.map(function (o) {
                    return Math.min.apply(Math, o.map(function (p) { return p[LatLng]; }));
                }));
            }

            function myLatLng() {

                var MLat = getMax(legality, 'lat') > getMax(illegality, 'lat') ? getMax(legality, 'lat') : getMax(illegality, 'lat');
                var mLat = getMin(legality, 'lat') > getMin(illegality, 'lat') ? getMin(legality, 'lat') : getMin(illegality, 'lat');
                var MLng = getMax(legality, 'lng') > getMax(illegality, 'lng') ? getMax(legality, 'lng') : getMax(illegality, 'lng');
                var mLng = getMin(legality, 'lng') > getMin(illegality, 'lng') ? getMin(legality, 'lng') : getMin(illegality, 'lng');

                var myLatLng = {
                    lat: (MLat + mLat) / 2,
                    lng: (MLng + mLng) / 2,
                }
                return myLatLng;
            };

            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 14,
                center: myLatLng()
            });


            for (var i = 0; i < legality.length; i++) {
                var flightPath = new google.maps.Polyline({
                    path: legality[i],
                    geodesic: true,
                    strokeColor: 'block',
                    strokeOpacity: 1.0,
                    strokeWeight: 4
                });
            }

            for (var i = 0; i < illegality.length; i++) {
                for (var j = 0; j < illegality[i].length; j++) {
                    var marker = new google.maps.Marker({
                        position: {
                            lat: illegality[i][j].lat,
                            lng: illegality[i][j].lng
                        },
                        map: map,
                        title: 'LineIndex:' + i + ' ,PointIndex:' + illegality[i][j].index,
                    });
                }
            }

            flightPath.setMap(map);
        }
    </script>
    <script async defer src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAR9MPmm4qI15TtNN6U5aKwRybzpqApmjM&callback=initMap">
    </script>
</body>
</html>